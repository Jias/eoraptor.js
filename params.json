{"name":"Eoraptor.js","tagline":"A tiny logic-less, super-easy javascript template engine without any dependence.","body":"# eoraptor.js\r\n\r\nA tiny logic-less, super-easy javascript template engine without any dependence.\r\n\r\n## Features\r\n\r\n1. Cleaner grammer than `mustache`.\r\n1. Without `with` statement in compiled function, recognized performance problems will be shielded.\r\n1. More detailed error logging.\r\n1. Build-in `index` support when iterating an array.\r\n2. Build-in `else if` support.\r\n1. TODO: Customizable output filter plugin(0%).\r\n1. More useful partial template than `mustache`.\r\n1. Matching [eoraptor-jst](https://www.npmjs.org/package/eoraptor-jst) tool in npm package.\r\n\r\n## Overview\r\n\r\n#### Base\r\n\r\nCompiling and rendering in browser runtime:\r\n\r\nDemo: \r\n\r\n    <!DOCTYPE html>\r\n    <html>\r\n    <body>\r\n        <script src=\"path/to/eoraptor.js\"></script>\r\n        <script>\r\n            var helloTplFn = eoraptor.compile(\"Hello {{this.name}}!\");\r\n            console.log(helloTplFn({\"name\": \"world\"}));\r\n            console.log(helloTplFn.source);\r\n        </script>\r\n    </body>\r\n    </html>\r\n\r\n#### Advanced\r\n\r\nRendering directly with the template function that has been pre-compiled before. \r\n\r\nDemo: \r\n\r\n    <!DOCTYPE html>\r\n    <html>\r\n    <body>\r\n        <script src=\"path/to/eoraptor.js\"></script>\r\n        <script src=\"path/to/eoraptor.render.js\"></script>\r\n        <script>\r\n            console.log(eoraptor.helloTplFn({\"name\": \"world\"}));\r\n        </script>\r\n    </body>\r\n    </html>\r\n\r\nThe name of `eoraptor.render.js` file would be any other word as you like when pre-compile building in nodejs, and the content in it would look like this:\r\n\r\n    // content in eoraptor.render.js\r\n    (function () {\r\n        var eo = eoraptor;\r\n        eo.helloTplFn = function (data){\r\n            var t__=data, r__=[];\r\n            r__.push(\"Hello \");\r\n            r__.push(t__.name);\r\n            r__.push(\"!\");\r\n            return r__.join(\"\");\r\n        };\r\n        // other pre-compiled function\r\n        // ...\r\n    });\r\n    \r\nThe `key` of a render template is get from the template file's name.\r\n\r\n    // content in helloTplFn.js\r\n    Hello {{this.name}}!\r\n\r\n\r\n## API\r\n\r\n#### Compiling and caching a template\r\n\r\n`eoraptor.compile(template)` / `eoraptor.compile(name, template)`\r\n\r\n* template: the template string.\r\n* name: the name will be used as the `key` of eorapter.cache. \r\n\r\nThe method returns an `template function` with two properties:\r\n\r\n    function render(data) {...};\r\n    render.render = render;\r\n    render.source = 'function(data) {...}';\r\n    return render;\r\n\r\nThe `render` function(and it's `render` method) is a compiled template function which takes one parameter as the context data. The `source` is only the string form of the `render` function, used by the pre-compile tool.\r\n\r\nDemo:\r\n\r\n    var tpl = eoraptor.compile('...');\r\n    // method 1\r\n    tpl.render(data);\r\n    // method 2\r\n    tpl(data);\r\n\r\n#### Setting delimeter\r\n\r\n`eoraptor.setDelimeter(start, end)`\r\n\r\n* start: optional, the start flag for delimeter, default to '{{'.\r\n* end: optional, the start flag for delimeter, default to '}}'.\r\n\r\nDemo:\r\n\r\n    eoraptor.setDelimiter('<%', '%>');\r\n    var tpl = eoraptor.compile('<%this.name%>');\r\n    tpl({\"name\": \"eoraptor.js\"});\r\n    // \"eoraptor.js\"\r\n\r\n## Template\r\n\r\n#### variable\r\n\r\n`{{this.key}}` / `{{this[\"key\"]}}`\r\n\r\n* key: required, the direct value of the `key` in context data.\r\n\r\n> Under the hood, the function returned by `eoraptor.compile()` is builded without `with` statement, so the expression needs to start with `this.` prefix and it will not throw errors like `underscore`.\r\n\r\nDemo: output the value of the `key` in context data. \r\n\r\n    var tpl = eoraptor.compile(\"{{this.name}}\");\r\n    tpl.render({\"name\": \"eoraptor.js\"}); \r\n    // \"eoraptor.js\"\r\n\r\nDemo: if there is no such `key` in context data.\r\n\r\n    var tpl = eoraptor.compile(\"{{this.name}}\");\r\n    tpl.render({}); \r\n    // \"\" empty string\r\n\r\n\r\n#### html-escaped variable: \r\n\r\n`{{@this.key}}` / `{{@this[\"key\"]}}`\r\n\r\n* key: required, the direct value of the `key` in context data.\r\n\r\ndemo: output the html-escaped value of the `key` in context data. \r\n\r\n    var tpl = eoraptor.compile(\"{{@this.name}}\");\r\n    tpl.render({\"name\": \"<h1> eoraptor.js </h1>\"}); \r\n    // \"&lt;h1&gt; eoraptor.js &lt;/h1&gt;\"\r\n\r\n\r\n#### if block: \r\n\r\nSTART with: `{{#anyValue}}` / `{{#this.key}}` / `{{#this[\"key\"]}}` / `{{#anyValue vs anyValue}}`\r\n\r\n* anyValue: any value of any types like `foo`, `true`, `[]`, `{}`, etc.\r\n* key: required, the direct value of the `key` in context data.\r\n* vs: available comparation flags contains `==`, `===`, `!=`, `!==`, `>=`, `<=`, `>`, `<`\r\n\r\nEND with: `{{/}}`\r\n\r\nDemo: To determine whether the `if()` is like `true`, comparing by `==`.\r\n\r\n    var data = {\"foo\": 1};\r\n    var tpl = eoraptor.compile(\"{{#this.foo}}like true{{/}}\");\r\n    tpl.render(data); \r\n    // \"like true\"\r\n\r\nDemo: To determine whether the `if()` is `true`, comparing by `===`.\r\n\r\n    var data = {\"foo\": 1};\r\n    var tpl = eoraptor.compile(\"{{#this.foo===true}}is true{{/}}\");\r\n    tpl.render(data); \r\n    // \"\" empty string\r\n\r\n    \r\n#### else if block: \r\n\r\nSTART with: `{{^anyValue}}` / `{{^this.key}}` / `{{^this[\"key\"]}}` / `{{^anyValue vs anyValue}}`\r\n\r\n* anyValue: any value of any types like `foo`, `true`, `[]`, `{}`, etc.\r\n* key: the direct value of the `key` in context data.\r\n* vs: available comparation flags contains `==`, `===`, `!=`, `!==`, `>=`, `<=`, `>`, `<`\r\n\r\nEND with: `{{/}}`\r\n\r\nDemo:\r\n\r\n    var tpl = eoraptor.compile(\"the number is {{#this.number === 1}}\"+\r\n        \"one\"+\r\n    \"{{^this.number === 2}}\"+\r\n        \"two\"+\r\n    \"{{/}}\");\r\n    tpl.render({\"number\": 2}); \r\n    // \"the number is two\"\r\n\r\n\r\n#### else block: \r\n\r\nSTART with: `{{^}}`\r\n\r\nEND with: `{{/}}`\r\n\r\nDemo:\r\n\r\n    var tpl = eoraptor.compile(\"the number is {{#this.number === 1}}\"+\r\n        \"one\"+\r\n    \"{{^}}\"+\r\n        \"unknown\"+\r\n    \"{{/}}\");\r\n    tpl.render({}); \r\n    // \"the number is unknown\"\r\n\r\n\r\n#### iteration block: \r\n\r\n`{{#this.key currentItem[ currentKey]}}`\r\n\r\n* key: required, the direct value of the `key` in context data.\r\n* currentItem: required, assign a variable to represent the current item in an iterative process.\r\n* currentKey: optional, default to `k__`, assign a variable to represent the current key in an iterative process. It will be a `number` value(like 0, 1, 2, etc.) or a `string` value determined by the iterative object, say, `array` or `object`.\r\n\r\nDemo: traversal of an array\r\n\r\n    var data = {\r\n        name: \"eoraptor\",\r\n        features: [\r\n            \"simple\",\r\n            \"standalone\"\r\n        ]\r\n    };\r\n    var tpl = eoraptor.compile(\"<ul>\"+\r\n        \"{{#this.features item key}}\"+\r\n            \"<li>{{key}}. {{this.name}} is {{item}}</li>\"+\r\n        \"{{/}}\"+\r\n    \"</ul>\");\r\n    tpl.render(data); \r\n    // \"<ul><li>0. eoraptor is simple</li><li>1. eoraptor is standalone</li></ul>\"\r\n\r\nDemo: enumerating an object\r\n\r\n    var data = {\r\n        features: {\r\n            \"grammer\": \"simple\",\r\n            \"dependency\": \"standalone\"\r\n        }\r\n    };\r\n    var tpl = eoraptor.compile(\"<ul>\"+\r\n        \"{{#this.features item key}}\"+\r\n            \"<li>{{key}}:{{item}}</li>\"+\r\n        \"{{/}}\"+\r\n    \"</ul>\");\r\n    tpl.render(data); \r\n    // \"<ul><li>grammer:simple</li><li>dependency:standalone</li></ul>\"\r\n\r\n\r\n#### comment block \r\n\r\n`{{!comment}}`\r\n\r\n* comment, any word for the commit.\r\n\r\nDemo: \r\n\r\n    var tpl = eoraptor.compile(\"{{!hello}}eoraptor.js\");\r\n    tpl.render(); // \"eoraptor.js\"\r\n\r\n   \r\n#### end of a block \r\n\r\n`{{/}}`\r\n\r\nDemo: if - elseif - else - end\r\n\r\n    var tpl = eoraptor.compile(\r\n        \"{{#this.status === 1}}\"+\r\n            \"one\"+\r\n        \"{{^this.status === 2}}\"+\r\n            \"two\"+\r\n        \"{{^}}\"+\r\n            \"unknown\"+\r\n        \"{{/}}\");\r\n\r\n\r\n#### partial template \r\n\r\n`{{>partialName[ partialContext]}}`\r\n\r\n* partialName: required, the name of partial template\r\n* partialContext: optional, the data context for partial template function\r\n\r\nMost of time, each UI compontent in the page is coded \r\nby several people, and everyone has the responsibility to keep their code clean, so the `key` in the partial template may be the same as each other. As you will see in the code lower, both templates, `navi` and `slider`, have the `list` key, so it will not work correctly with a public context data.\r\n\r\n> Unless changing `list` into `naviList` and `sliderList`, but it's clearly violates the reused principle.\r\n\r\nAt this time, we can resolve the `key` conflict by assignasing an independent context data to partial template when defining a combined one.\r\n    \r\nCompiling two partial templates for later use, say `navi` and `slider`:\r\n\r\n    eoraptor.compile('navi', '<ul>{{#this.list item}}'+\r\n        '<li>{{item.text}}</li>'+\r\n    '{{/}}</ul>');\r\n    \r\n    eoraptor.compile('slider', '<ul>{{#this.list item}}'+\r\n        '<li>{{item.img}}</li>'+\r\n    '{{/}}</ul>');\r\n\r\nBelow we compile and render a combined template, including two partial templates defined above. \r\n\r\n    var tpl = eoraptor.compile(\r\n        '<p>navi:</p>'+\r\n        '{{>navi this.navi}}'+\r\n        '<p>slider:</p>'+\r\n        '{{>slider this.slider}}'\r\n    );\r\n        \r\n    tpl.render({\r\n        navi: {\r\n            list: [\r\n                {text: 'foo'}, {text: 'boo'}\r\n            ]\r\n        },\r\n        slider: {\r\n            list: [\r\n                {img: '1.jpg'}, {img: '2.jpg'}\r\n            ]\r\n        }\r\n    });\r\n    // output:\r\n    //   <p>navi:</p>\r\n    //   <ul><li>foo</li><li>boo</li></ul>\r\n    //   <p>slider:</p>\r\n    //   <ul><li>1.jpg</li><li>2.jpg</li></ul>\r\n\r\n\r\n## License\r\n\r\nThe JavaScript Templates script is released under the [MIT license](http://opensource.org/licenses/MIT).\r\n\r\n## Author\r\n\r\n@gnosaij / [www.joy-studio.com](http://www.joy-studio.com)\r\n\r\n## Updates\r\n\r\n* 2014-03-21\r\n  - initial version 1.0.0\r\n* 2014-04-01\r\n  - add eoraptor-jst support\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}