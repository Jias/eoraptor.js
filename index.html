<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>Eoraptor.js by Jias</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>Eoraptor.js</h1>
        <h2>A tiny logic-less, super-easy javascript template engine without any dependence.</h2>
        <a href="https://github.com/Jias/eoraptor.js" class="button"><small>View project on</small>GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <h1>
<a name="eoraptorjs" class="anchor" href="#eoraptorjs"><span class="octicon octicon-link"></span></a>eoraptor.js</h1>

<p>A mini expression javascript template engine without any dependence. Compatible with client-side and server-side.</p>

<h2>
<a name="features" class="anchor" href="#features"><span class="octicon octicon-link"></span></a>Features</h2>

<ol>
<li>Cleaner grammer than <code>mustache</code>.</li>
<li>Without <code>with</code> statement in compiled function, recognized performance problems will be shielded.</li>
<li>More detailed error logging.</li>
<li>Build-in <code>index</code> support when iterating an array.</li>
<li>Build-in <code>else if</code> support.</li>
<li>TODO: Customizable output filter plugin.</li>
<li>More useful partial template than <code>mustache</code>.</li>
<li>Matching <a href="https://www.npmjs.org/package/eoraptor-jst">eoraptor-jst</a> tool in npm package.</li>
</ol><h2>
<a name="unit-test" class="anchor" href="#unit-test"><span class="octicon octicon-link"></span></a>Unit test</h2>

<p>A quick glance at the <a href="http://jias.github.io/eoraptor.js/test/test.html">unit test</a> maybe the most direct way to dive in.</p>

<h2>
<a name="usage" class="anchor" href="#usage"><span class="octicon octicon-link"></span></a>Usage</h2>

<h4>
<a name="client-side" class="anchor" href="#client-side"><span class="octicon octicon-link"></span></a>Client-side</h4>

<p>Including the eoraptor engine by script tag.</p>

<div class="highlight highlight-html"><pre><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"path/to/eoraptor.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
</pre></div>

<p>The classic <code>hello world</code> example achieved through a variety of ways.</p>

<h6>
<a name="method-1compiling-a-template-from-a-string-parameter" class="anchor" href="#method-1compiling-a-template-from-a-string-parameter"><span class="octicon octicon-link"></span></a>Method 1：Compiling a template from a string parameter.</h6>

<div class="highlight highlight-js"><pre><span class="kd">var</span> <span class="nx">hw</span> <span class="o">=</span> <span class="nx">eoraptor</span><span class="p">.</span><span class="nx">compile</span><span class="p">(</span><span class="s2">"Hello {{this.name}}!"</span><span class="p">);</span>
<span class="nx">hw</span><span class="p">({</span><span class="s2">"name"</span><span class="o">:</span> <span class="s2">"world"</span><span class="p">});</span>
<span class="c1">// "Hello world!"</span>
</pre></div>

<p>Usually, this method is more suitable for compiling a pretty simple template.</p>

<h6>
<a name="method-2compiling-templates-from-the-script-tags-with-a-textx-eoraptor-type-and-an-unique-id-property" class="anchor" href="#method-2compiling-templates-from-the-script-tags-with-a-textx-eoraptor-type-and-an-unique-id-property"><span class="octicon octicon-link"></span></a>Method 2：Compiling templates from the script tags, with a <code>text/x-eoraptor</code> type and an unique <code>id</code> property.</h6>

<div class="highlight highlight-html"><pre><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/x-eoraptor"</span> <span class="na">id=</span><span class="s">"hw"</span><span class="nt">&gt;</span>
<span class="nx">Hello</span> <span class="p">{{</span><span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">}}</span><span class="o">!</span>
<span class="nt">&lt;/script&gt;</span>
<span class="nt">&lt;script&gt;</span>
<span class="nx">eoraptor</span><span class="p">.</span><span class="nx">extract</span><span class="p">();</span>
<span class="nx">eoraptor</span><span class="p">.</span><span class="nx">hw</span><span class="p">({</span><span class="s2">"name"</span><span class="o">:</span> <span class="s2">"world"</span><span class="p">});</span>
<span class="c1">// "Hello world!"</span>
<span class="nt">&lt;/script&gt;</span>
</pre></div>

<h6>
<a name="method-3-including-the-precompiled-file-which-contains-all-template-functions-and-rendering-directly-without-callingeoraptorcompile-or-exraptorextract-api" class="anchor" href="#method-3-including-the-precompiled-file-which-contains-all-template-functions-and-rendering-directly-without-callingeoraptorcompile-or-exraptorextract-api"><span class="octicon octicon-link"></span></a>Method 3: Including the precompiled file which contains all template functions and rendering directly without calling<code>eoraptor.compile()</code> or <code>exraptor.extract()</code> api.</h6>

<div class="highlight highlight-html"><pre><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"path/to/eoraptor-precompiled.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script&gt;</span>
<span class="nx">eoraptor</span><span class="p">.</span><span class="nx">hw</span><span class="p">({</span><span class="s2">"name"</span><span class="o">:</span> <span class="s2">"world"</span><span class="p">});</span>
<span class="nt">&lt;/script&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div>

<p>The name of <code>eoraptor-precompiled.js</code> file and the namespace of all templaltes，<code>eoraptor</code> in the example above, would be any other word as you like(a declaration in options of pre-compiling tool), and the content in the file would look like this:</p>

<div class="highlight highlight-js"><pre><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// NOTE: The reality would be more complex than here</span>
    <span class="kd">var</span> <span class="nx">ns</span> <span class="o">=</span> <span class="k">this</span><span class="p">[</span><span class="s2">"namespaceYouLike"</span><span class="p">]</span> <span class="o">||</span> <span class="p">{};</span>

    <span class="nx">ns</span><span class="p">[</span><span class="s2">"hw"</span><span class="p">]</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">){</span>
        <span class="kd">var</span> <span class="nx">t__</span> <span class="o">=</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">r__</span> <span class="o">=</span> <span class="p">[];</span>
        <span class="nx">r__</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s2">"Hello "</span><span class="p">);</span>
        <span class="nx">r__</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">t__</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span>
        <span class="nx">r__</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s2">"!"</span><span class="p">);</span>
        <span class="k">return</span> <span class="nx">r__</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">""</span><span class="p">);</span>
    <span class="p">};</span>
    <span class="c1">// more functions</span>
    <span class="c1">// ns["foo"] = function (data) {};</span>
    <span class="c1">// ...</span>
<span class="p">});</span>
</pre></div>

<p>NOTE: The reality of <code>namespace declaration</code> would be more complex than here, more details will be found in pre-compiling section.</p>

<h2>
<a name="api" class="anchor" href="#api"><span class="octicon octicon-link"></span></a>API</h2>

<h4>
<a name="compiling-and-caching-a-template" class="anchor" href="#compiling-and-caching-a-template"><span class="octicon octicon-link"></span></a>Compiling and caching a template</h4>

<p><code>eoraptor.compile(template)</code> / <code>eoraptor.compile(id, template)</code></p>

<ul>
<li>template: the template string.</li>
<li>id: a unique name will be used as the <code>key</code> for inner cache. If none, the <code>template</code> itself will be used instead.</li>
</ul><p>In order to improve the performance of compiling, this method will save a cache for every template string, when the same template is passed in, it will skip the parsing step and return the cache directly.</p>

<p>The method returns a compiled <code>renderable</code> function with two properties, the <code>render</code> property is a reference to the function itself which takes one parameter as the context data. The <code>source</code> property is only the string form of the <code>render</code>, used by the pre-compile tool.</p>

<p>Demo:</p>

<div class="highlight highlight-js"><pre><span class="kd">var</span> <span class="nx">fooTpl</span> <span class="o">=</span> <span class="nx">eoraptor</span><span class="p">.</span><span class="nx">compile</span><span class="p">(</span><span class="s1">'foo'</span><span class="p">,</span><span class="s1">'{{this.foo}}'</span><span class="p">);</span>
<span class="c1">// method 1</span>
<span class="nx">fooTpl</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="c1">// method 2</span>
<span class="nx">fooTpl</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="c1">// method 3</span>
<span class="nx">eoraptor</span><span class="p">.</span><span class="nx">foo</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
</pre></div>

<h4>
<a name="compiling-templates-from-script-tags" class="anchor" href="#compiling-templates-from-script-tags"><span class="octicon octicon-link"></span></a>Compiling templates from script tags</h4>

<p><code>eoraptor.compile()</code> / <code>eoraptor.extract()</code></p>

<p>When the <code>compile</code> method is called with zero parameter, it will get the same effect of <code>extract</code> method, that all script tags with a "text/x-eoraptor" type and an unique id property will be processed as individual template definitions.</p>

<p>Demo:</p>

<div class="highlight highlight-html"><pre><span class="nt">&lt;script </span><span class="na">id=</span><span class="s">"sayMorning"</span> <span class="na">type=</span><span class="s">"text/x-eoraptor"</span><span class="nt">&gt;</span>
<span class="nx">Good</span> <span class="nx">morning</span><span class="p">,</span> <span class="p">{{</span><span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">}}</span><span class="o">!</span>
<span class="nt">&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">id=</span><span class="s">"sayAfternoon"</span> <span class="na">type=</span><span class="s">"text/x-eoraptor"</span><span class="nt">&gt;</span>
<span class="nx">Good</span> <span class="nx">afternoon</span><span class="p">,</span> <span class="p">{{</span><span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">}}</span><span class="o">!</span>
<span class="nt">&lt;/script&gt;</span>

<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span><span class="nt">&gt;</span>
<span class="nx">eoraptor</span><span class="p">.</span><span class="nx">compile</span><span class="p">();</span>
<span class="nx">eoraptor</span><span class="p">.</span><span class="nx">sayMorning</span><span class="p">;</span> <span class="c1">// "function"</span>
<span class="nx">eoraptor</span><span class="p">.</span><span class="nx">sayAfternoon</span><span class="p">;</span> <span class="c1">// "function"</span>
<span class="nt">&lt;/script&gt;</span>
</pre></div>

<p>After calling the <code>extract</code>, the script tag will be added a <code>compiled</code> attribute, so it would be ignored in next calling.</p>

<div class="highlight highlight-html"><pre><span class="nt">&lt;script </span><span class="na">id=</span><span class="s">"sayMorning"</span> <span class="na">type=</span><span class="s">"text/x-eoraptor"</span> <span class="na">compiled=</span><span class="s">"1"</span><span class="nt">&gt;</span>
<span class="nx">Good</span> <span class="nx">morning</span><span class="p">,</span> <span class="p">{{</span><span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">}}</span><span class="o">!</span>
<span class="nt">&lt;/script&gt;</span>
</pre></div>

<h4>
<a name="setting-delimeter" class="anchor" href="#setting-delimeter"><span class="octicon octicon-link"></span></a>Setting delimeter</h4>

<p><code>eoraptor.setDelimeter(start, end)</code></p>

<ul>
<li>start: optional, the start flag for delimeter, default to '{{'.</li>
<li>end: optional, the start flag for delimeter, default to '}}'.</li>
</ul><p>Demo:</p>

<div class="highlight highlight-js"><pre><span class="nx">eoraptor</span><span class="p">.</span><span class="nx">setDelimiter</span><span class="p">(</span><span class="s1">'&lt;%'</span><span class="p">,</span> <span class="s1">'%&gt;'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">tpl</span> <span class="o">=</span> <span class="nx">eoraptor</span><span class="p">.</span><span class="nx">compile</span><span class="p">(</span><span class="s1">'&lt;%this.name%&gt;'</span><span class="p">);</span>
<span class="nx">tpl</span><span class="p">({</span><span class="s2">"name"</span><span class="o">:</span> <span class="s2">"eoraptor.js"</span><span class="p">});</span>
<span class="c1">// "eoraptor.js"</span>
</pre></div>

<h2>
<a name="template" class="anchor" href="#template"><span class="octicon octicon-link"></span></a>Template</h2>

<h4>
<a name="variable" class="anchor" href="#variable"><span class="octicon octicon-link"></span></a>variable</h4>

<p><code>{{this.key}}</code> / <code>{{this["key"]}}</code></p>

<ul>
<li>key: required, the direct value of the <code>key</code> in context data.</li>
</ul><blockquote>
<p>Under the hood, the function returned by <code>eoraptor.compile()</code> is builded without <code>with</code> statement, so the expression needs to start with <code>this.</code> prefix and it will not throw errors like <code>underscore</code>.</p>
</blockquote>

<p>Demo: output the value of the <code>key</code> in context data.</p>

<div class="highlight highlight-js"><pre><span class="kd">var</span> <span class="nx">tpl</span> <span class="o">=</span> <span class="nx">eoraptor</span><span class="p">.</span><span class="nx">compile</span><span class="p">(</span><span class="s2">"{{this.name}}"</span><span class="p">);</span>
<span class="nx">tpl</span><span class="p">.</span><span class="nx">render</span><span class="p">({</span><span class="s2">"name"</span><span class="o">:</span> <span class="s2">"eoraptor.js"</span><span class="p">});</span>
<span class="c1">// "eoraptor.js"</span>
</pre></div>

<p>Demo: if there is no such <code>key</code> in context data.</p>

<div class="highlight highlight-js"><pre><span class="kd">var</span> <span class="nx">tpl</span> <span class="o">=</span> <span class="nx">eoraptor</span><span class="p">.</span><span class="nx">compile</span><span class="p">(</span><span class="s2">"{{this.name}}"</span><span class="p">);</span>
<span class="nx">tpl</span><span class="p">.</span><span class="nx">render</span><span class="p">({});</span>
<span class="c1">// "" empty string</span>
</pre></div>

<h4>
<a name="html-escaped-variable" class="anchor" href="#html-escaped-variable"><span class="octicon octicon-link"></span></a>html-escaped variable:</h4>

<p><code>{{@this.key}}</code> / <code>{{@this["key"]}}</code></p>

<ul>
<li>key: required, the direct value of the <code>key</code> in context data.</li>
</ul><p>demo: output the html-escaped value of the <code>key</code> in context data.</p>

<div class="highlight highlight-js"><pre><span class="kd">var</span> <span class="nx">tpl</span> <span class="o">=</span> <span class="nx">eoraptor</span><span class="p">.</span><span class="nx">compile</span><span class="p">(</span><span class="s2">"{{@this.name}}"</span><span class="p">);</span>
<span class="nx">tpl</span><span class="p">.</span><span class="nx">render</span><span class="p">({</span><span class="s2">"name"</span><span class="o">:</span> <span class="s2">"&lt;h1&gt; eoraptor.js &lt;/h1&gt;"</span><span class="p">});</span>
<span class="c1">// "&amp;lt;h1&amp;gt; eoraptor.js &amp;lt;/h1&amp;gt;"</span>
</pre></div>

<h4>
<a name="if-block" class="anchor" href="#if-block"><span class="octicon octicon-link"></span></a>if block:</h4>

<p>START with: <code>{{#anyValue}}</code> / <code>{{#this.key}}</code> / <code>{{#this["key"]}}</code> / <code>{{#anyValue vs anyValue}}</code></p>

<ul>
<li>anyValue: any value of any types like <code>foo</code>, <code>true</code>, <code>[]</code>, <code>{}</code>, etc.</li>
<li>key: required, the direct value of the <code>key</code> in context data.</li>
<li>vs: available comparation flags contains <code>==</code>, <code>===</code>, <code>!=</code>, <code>!==</code>, <code>&gt;=</code>, <code>&lt;=</code>, <code>&gt;</code>, <code>&lt;</code>
</li>
</ul><p>END with: <code>{{/}}</code></p>

<p>Demo: To determine whether the <code>if()</code> is like <code>true</code>, comparing by <code>==</code>.</p>

<div class="highlight highlight-js"><pre><span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"foo"</span><span class="o">:</span> <span class="mi">1</span><span class="p">};</span>
<span class="kd">var</span> <span class="nx">tpl</span> <span class="o">=</span> <span class="nx">eoraptor</span><span class="p">.</span><span class="nx">compile</span><span class="p">(</span><span class="s2">"{{#this.foo}}like true{{/}}"</span><span class="p">);</span>
<span class="nx">tpl</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="c1">// "like true"</span>
</pre></div>

<p>Demo: To determine whether the <code>if()</code> is <code>true</code>, comparing by <code>===</code>.</p>

<div class="highlight highlight-js"><pre><span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"foo"</span><span class="o">:</span> <span class="mi">1</span><span class="p">};</span>
<span class="kd">var</span> <span class="nx">tpl</span> <span class="o">=</span> <span class="nx">eoraptor</span><span class="p">.</span><span class="nx">compile</span><span class="p">(</span><span class="s2">"{{#this.foo===true}}is true{{/}}"</span><span class="p">);</span>
<span class="nx">tpl</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="c1">// "" empty string</span>
</pre></div>

<h4>
<a name="else-if-block" class="anchor" href="#else-if-block"><span class="octicon octicon-link"></span></a>else if block:</h4>

<p>START with: <code>{{^anyValue}}</code> / <code>{{^this.key}}</code> / <code>{{^this["key"]}}</code> / <code>{{^anyValue vs anyValue}}</code></p>

<ul>
<li>anyValue: any value of any types like <code>foo</code>, <code>true</code>, <code>[]</code>, <code>{}</code>, etc.</li>
<li>key: the direct value of the <code>key</code> in context data.</li>
<li>vs: available comparation flags contains <code>==</code>, <code>===</code>, <code>!=</code>, <code>!==</code>, <code>&gt;=</code>, <code>&lt;=</code>, <code>&gt;</code>, <code>&lt;</code>
</li>
</ul><p>END with: <code>{{/}}</code></p>

<p>Demo:</p>

<div class="highlight highlight-js"><pre><span class="kd">var</span> <span class="nx">tpl</span> <span class="o">=</span> <span class="nx">eoraptor</span><span class="p">.</span><span class="nx">compile</span><span class="p">(</span><span class="s2">"the number is {{#this.number === 1}}"</span><span class="o">+</span>
    <span class="s2">"one"</span><span class="o">+</span>
<span class="s2">"{{^this.number === 2}}"</span><span class="o">+</span>
    <span class="s2">"two"</span><span class="o">+</span>
<span class="s2">"{{/}}"</span><span class="p">);</span>
<span class="nx">tpl</span><span class="p">.</span><span class="nx">render</span><span class="p">({</span><span class="s2">"number"</span><span class="o">:</span> <span class="mi">2</span><span class="p">});</span>
<span class="c1">// "the number is two"</span>
</pre></div>

<h4>
<a name="else-block" class="anchor" href="#else-block"><span class="octicon octicon-link"></span></a>else block:</h4>

<p>START with: <code>{{^}}</code></p>

<p>END with: <code>{{/}}</code></p>

<p>Demo:</p>

<div class="highlight highlight-js"><pre><span class="kd">var</span> <span class="nx">tpl</span> <span class="o">=</span> <span class="nx">eoraptor</span><span class="p">.</span><span class="nx">compile</span><span class="p">(</span><span class="s2">"the number is {{#this.number === 1}}"</span><span class="o">+</span>
    <span class="s2">"one"</span><span class="o">+</span>
<span class="s2">"{{^}}"</span><span class="o">+</span>
    <span class="s2">"unknown"</span><span class="o">+</span>
<span class="s2">"{{/}}"</span><span class="p">);</span>
<span class="nx">tpl</span><span class="p">.</span><span class="nx">render</span><span class="p">({});</span>
<span class="c1">// "the number is unknown"</span>
</pre></div>

<h4>
<a name="iteration-block" class="anchor" href="#iteration-block"><span class="octicon octicon-link"></span></a>iteration block:</h4>

<p><code>{{#this.key currentItem[ currentKey]}}</code></p>

<ul>
<li>key: required, the direct value of the <code>key</code> in context data.</li>
<li>currentItem: required, assign a variable to represent the current item in an iterative process.</li>
<li>currentKey: optional, default to <code>k__</code>, assign a variable to represent the current key in an iterative process. It will be a <code>number</code> value(like 0, 1, 2, etc.) or a <code>string</code> value determined by the iterative object, say, <code>array</code> or <code>object</code>.</li>
</ul><p>Demo: traversal of an array</p>

<div class="highlight highlight-js"><pre><span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">name</span><span class="o">:</span> <span class="s2">"eoraptor"</span><span class="p">,</span>
    <span class="nx">features</span><span class="o">:</span> <span class="p">[</span>
        <span class="s2">"simple"</span><span class="p">,</span>
        <span class="s2">"standalone"</span>
    <span class="p">]</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">tpl</span> <span class="o">=</span> <span class="nx">eoraptor</span><span class="p">.</span><span class="nx">compile</span><span class="p">(</span><span class="s2">"&lt;ul&gt;"</span><span class="o">+</span>
    <span class="s2">"{{#this.features item key}}"</span><span class="o">+</span>
        <span class="s2">"&lt;li&gt;{{key}}. {{this.name}} is {{item}}&lt;/li&gt;"</span><span class="o">+</span>
    <span class="s2">"{{/}}"</span><span class="o">+</span>
<span class="s2">"&lt;/ul&gt;"</span><span class="p">);</span>
<span class="nx">tpl</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="c1">// "&lt;ul&gt;&lt;li&gt;0. eoraptor is simple&lt;/li&gt;&lt;li&gt;1. eoraptor is standalone&lt;/li&gt;&lt;/ul&gt;"</span>
</pre></div>

<p>Demo: enumerating an object</p>

<div class="highlight highlight-js"><pre><span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">features</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">"grammer"</span><span class="o">:</span> <span class="s2">"simple"</span><span class="p">,</span>
        <span class="s2">"dependency"</span><span class="o">:</span> <span class="s2">"standalone"</span>
    <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">tpl</span> <span class="o">=</span> <span class="nx">eoraptor</span><span class="p">.</span><span class="nx">compile</span><span class="p">(</span><span class="s2">"&lt;ul&gt;"</span><span class="o">+</span>
    <span class="s2">"{{#this.features item key}}"</span><span class="o">+</span>
        <span class="s2">"&lt;li&gt;{{key}}:{{item}}&lt;/li&gt;"</span><span class="o">+</span>
    <span class="s2">"{{/}}"</span><span class="o">+</span>
<span class="s2">"&lt;/ul&gt;"</span><span class="p">);</span>
<span class="nx">tpl</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span> 
<span class="c1">// "&lt;ul&gt;&lt;li&gt;grammer:simple&lt;/li&gt;&lt;li&gt;dependency:standalone&lt;/li&gt;&lt;/ul&gt;"</span>
</pre></div>

<h4>
<a name="comment-block" class="anchor" href="#comment-block"><span class="octicon octicon-link"></span></a>comment block</h4>

<p><code>{{!comment}}</code></p>

<ul>
<li>comment, any word for the commit.</li>
</ul><p>Demo:</p>

<div class="highlight highlight-js"><pre><span class="kd">var</span> <span class="nx">tpl</span> <span class="o">=</span> <span class="nx">eoraptor</span><span class="p">.</span><span class="nx">compile</span><span class="p">(</span><span class="s2">"{{!hello}}eoraptor.js"</span><span class="p">);</span>
<span class="nx">tpl</span><span class="p">.</span><span class="nx">render</span><span class="p">();</span> <span class="c1">// "eoraptor.js"</span>
</pre></div>

<h4>
<a name="end-of-a-block" class="anchor" href="#end-of-a-block"><span class="octicon octicon-link"></span></a>end of a block</h4>

<p><code>{{/}}</code></p>

<p>You can see it everywhere above.</p>

<h4>
<a name="partial-template" class="anchor" href="#partial-template"><span class="octicon octicon-link"></span></a>partial template</h4>

<p><code>{{&gt;partialName[ partialContext]}}</code></p>

<ul>
<li>partialName: required, the name of partial template</li>
<li>partialContext: optional, the data context for partial template function</li>
</ul><p>Most of time, each UI compontent in the page is coded by several people, and everyone has the responsibility to keep their code clean, so the <code>key</code> in the partial template may be the same as each other. As you will see in the code lower, both templates, <code>navi</code> and <code>slider</code>, have the <code>list</code> key, so it will not work correctly with a public context data.</p>

<blockquote>
<p>Unless changing <code>list</code> into <code>naviList</code> and <code>sliderList</code>, but it's clearly violates the reused principle.</p>
</blockquote>

<p>At this time, we can resolve the <code>key</code> conflict by assignasing an independent context data to partial template when defining a combined one.</p>

<p>Compiling two partial templates for later use, say <code>navi</code> and <code>slider</code>:</p>

<div class="highlight highlight-js"><pre><span class="nx">eoraptor</span><span class="p">.</span><span class="nx">compile</span><span class="p">(</span><span class="s1">'navi'</span><span class="p">,</span> <span class="s1">'&lt;ul&gt;{{#this.list item}}'</span><span class="o">+</span>
    <span class="s1">'&lt;li&gt;{{item.text}}&lt;/li&gt;'</span><span class="o">+</span>
<span class="s1">'{{/}}&lt;/ul&gt;'</span><span class="p">);</span>

<span class="nx">eoraptor</span><span class="p">.</span><span class="nx">compile</span><span class="p">(</span><span class="s1">'slider'</span><span class="p">,</span> <span class="s1">'&lt;ul&gt;{{#this.list item}}'</span><span class="o">+</span>
    <span class="s1">'&lt;li&gt;{{item.img}}&lt;/li&gt;'</span><span class="o">+</span>
<span class="s1">'{{/}}&lt;/ul&gt;'</span><span class="p">);</span>
</pre></div>

<p>Below we compile and render a combined template, including two partial templates defined above.</p>

<div class="highlight highlight-js"><pre><span class="kd">var</span> <span class="nx">tpl</span> <span class="o">=</span> <span class="nx">eoraptor</span><span class="p">.</span><span class="nx">compile</span><span class="p">(</span>
    <span class="s1">'&lt;p&gt;navi:&lt;/p&gt;'</span><span class="o">+</span>
    <span class="s1">'{{&gt;navi this.navi}}'</span><span class="o">+</span>
    <span class="s1">'&lt;p&gt;slider:&lt;/p&gt;'</span><span class="o">+</span>
    <span class="s1">'{{&gt;slider this.slider}}'</span>
<span class="p">);</span>

<span class="nx">tpl</span><span class="p">.</span><span class="nx">render</span><span class="p">({</span>
    <span class="nx">navi</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">list</span><span class="o">:</span> <span class="p">[</span>
            <span class="p">{</span><span class="nx">text</span><span class="o">:</span> <span class="s1">'foo'</span><span class="p">},</span> <span class="p">{</span><span class="nx">text</span><span class="o">:</span> <span class="s1">'boo'</span><span class="p">}</span>
        <span class="p">]</span>
    <span class="p">},</span>
    <span class="nx">slider</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">list</span><span class="o">:</span> <span class="p">[</span>
            <span class="p">{</span><span class="nx">img</span><span class="o">:</span> <span class="s1">'1.jpg'</span><span class="p">},</span> <span class="p">{</span><span class="nx">img</span><span class="o">:</span> <span class="s1">'2.jpg'</span><span class="p">}</span>
        <span class="p">]</span>
    <span class="p">}</span>
<span class="p">});</span>
<span class="c1">// output:</span>
<span class="c1">//   &lt;p&gt;navi:&lt;/p&gt;</span>
<span class="c1">//   &lt;ul&gt;&lt;li&gt;foo&lt;/li&gt;&lt;li&gt;boo&lt;/li&gt;&lt;/ul&gt;</span>
<span class="c1">//   &lt;p&gt;slider:&lt;/p&gt;</span>
<span class="c1">//   &lt;ul&gt;&lt;li&gt;1.jpg&lt;/li&gt;&lt;li&gt;2.jpg&lt;/li&gt;&lt;/ul&gt;</span>
</pre></div>

<h2>
<a name="license" class="anchor" href="#license"><span class="octicon octicon-link"></span></a>License</h2>

<p>The JavaScript Templates script is released under the <a href="http://opensource.org/licenses/MIT">MIT license</a>.</p>

<h2>
<a name="author" class="anchor" href="#author"><span class="octicon octicon-link"></span></a>Author</h2>

<p>@gnosaij / <a href="http://www.joy-studio.com">www.joy-studio.com</a></p>

<h2>
<a name="changelog" class="anchor" href="#changelog"><span class="octicon octicon-link"></span></a>Changelog</h2>

<ul>
<li>2014-04-15

<ul>
<li>
<code>compile</code> method support zero parameter</li>
<li>update grunt task</li>
</ul>
</li>
<li>2014-04-03

<ul>
<li>add <code>extract</code> method</li>
</ul>
</li>
<li>2014-04-01

<ul>
<li>add <code>eoraptor-jst</code> support</li>
</ul>
</li>
<li>2014-03-21

<ul>
<li>initial version</li>
</ul>
</li>
</ul>
        </section>

        <aside id="sidebar">
          <a href="https://github.com/Jias/eoraptor.js/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/Jias/eoraptor.js/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/Jias/eoraptor.js"></a> is maintained by <a href="https://github.com/Jias">Jias</a>.</p>

          <p>This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

  
  </body>
</html>